if (self.CavalryLogger) { CavalryLogger.start_js(["X0fQu"]); }

__d('legacy:dom-misc',['DeprecatedCSSMiscellany'],(function a(b,c,d,e,f,g){b.show=c('DeprecatedCSSMiscellany').show;b.hide=c('DeprecatedCSSMiscellany').hide;b.shown=c('DeprecatedCSSMiscellany').shown;b.toggle=c('DeprecatedCSSMiscellany').toggle;b.toggleDisplayNone=c('DeprecatedCSSMiscellany').toggleDisplayNone;}),3);
__d('FeedDebugUtils',['Event','DOM','URI','AsyncRequest'],(function a(b,c,d,e,f,g){var h={registerLayerPage:function i(j,k){c('Event').listen(j,'click',k.show.bind(k));},updateModelReplayLink:function i(j,k){c('Event').listen(j,'click',function(){var l=new (c('AsyncRequest'))('/intern/ajax/paste');l.setData({content:k});l.setHandler(function(m){var n='P'+m.payload.id,o=new (c('URI'))('/intern/feedtools/model_replay').addQueryData('zombie_story',n),p=c('DOM').create('a',{href:o.toString(),target:'_blank'},'open model replay tool ('+n+')');c('DOM').replace(j,p);});l.send();});}};f.exports=h;}),null);
__d('VideoWatchAndScrollOverlay',['csx','cx','CSS','Bootloader','DOM','EventListener','Map','React','ReactDOM','EmbeddedVideoScrubber.react','EmbeddedVideoPlaybackTimer.react','SubscriptionsHandler','UFICentralUpdates','UFIFeedbackTargets','UFIReactionTypes','UFIUserActions','VideoChainingCaller','VideoPlayerController','VideoPlayerExperiments','VideoPlayerLoggerEvent','VideoPlayerReason','destroyOnUnload','throttle','requestAnimationFrame','emptyFunction','getActiveElement','setImmediate'],(function a(b,c,d,e,f,g,h,i){var j=c('VideoPlayerExperiments').persistentWNSEnabled;function k(l,m,n,o){'use strict';this.$VideoWatchAndScrollOverlay17=m;this.$VideoWatchAndScrollOverlay23=l;this.$VideoWatchAndScrollOverlay21=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollOverlay2=o;this.$VideoWatchAndScrollOverlay10=n.likeButton;this.$VideoWatchAndScrollOverlay22=n.unlikeButton;this.$VideoWatchAndScrollOverlay7=n.ftEntID;this.$VideoWatchAndScrollOverlay5=n.feedbackSource;this.$VideoWatchAndScrollOverlay9=n.isLiveStream;this.$VideoWatchAndScrollOverlay1=0;this.$VideoWatchAndScrollOverlay13=0;this.$VideoWatchAndScrollOverlay12=0;if(this.$VideoWatchAndScrollOverlay7){this.$VideoWatchAndScrollOverlay26();this.$VideoWatchAndScrollOverlay21.addSubscriptions(c('UFICentralUpdates').subscribe('feedback-updated',function(u,v){if(this.$VideoWatchAndScrollOverlay7 in v.updates)this.$VideoWatchAndScrollOverlay26();}.bind(this)));c('EventListener').listen(this.$VideoWatchAndScrollOverlay10,'click',this.$VideoWatchAndScrollOverlay27.bind(this));c('EventListener').listen(this.$VideoWatchAndScrollOverlay22,'click',this.$VideoWatchAndScrollOverlay27.bind(this));}this.$VideoWatchAndScrollOverlay15=c('DOM').find(this.$VideoWatchAndScrollOverlay17,"._n2-");this.$VideoWatchAndScrollOverlay25=c('DOM').find(this.$VideoWatchAndScrollOverlay17,"._4per");this.$VideoWatchAndScrollOverlay3=c('DOM').scry(this.$VideoWatchAndScrollOverlay17,"._35vp")[0];this.$VideoWatchAndScrollOverlay18=c('DOM').find(this.$VideoWatchAndScrollOverlay17,"._11jc");this.$VideoWatchAndScrollOverlay14=c('DOM').find(this.$VideoWatchAndScrollOverlay17,"._5sv5");this.$VideoWatchAndScrollOverlay4=c('DOM').find(this.$VideoWatchAndScrollOverlay17,"._n2_");this.$VideoWatchAndScrollOverlay23.addListener('stateChange',this.$VideoWatchAndScrollOverlay28.bind(this));this.$VideoWatchAndScrollOverlay23.addListener('beginPlayback',this.$VideoWatchAndScrollOverlay29.bind(this));this.$VideoWatchAndScrollOverlay23.addListener('pausePlayback',this.$VideoWatchAndScrollOverlay30.bind(this));this.$VideoWatchAndScrollOverlay23.addListener('finishPlayback',this.$VideoWatchAndScrollOverlay31.bind(this));this.$VideoWatchAndScrollOverlay23.addListener('unmuteVideo',this.$VideoWatchAndScrollOverlay32.bind(this));this.$VideoWatchAndScrollOverlay23.addListener('muteVideo',this.$VideoWatchAndScrollOverlay33.bind(this));this.$VideoWatchAndScrollOverlay23.addListener('adBreakIndicatorShowing',this.$VideoWatchAndScrollOverlay34.bind(this));this.$VideoWatchAndScrollOverlay23.addListener('exitWatchAndScroll',this.$VideoWatchAndScrollOverlay32.bind(this));c('EventListener').listen(this.$VideoWatchAndScrollOverlay15,'click',this.$VideoWatchAndScrollOverlay35.bind(this));c('EventListener').listen(this.$VideoWatchAndScrollOverlay25,'click',this.$VideoWatchAndScrollOverlay36.bind(this));if(this.$VideoWatchAndScrollOverlay3)c('EventListener').listen(this.$VideoWatchAndScrollOverlay3,'click',this.$VideoWatchAndScrollOverlay37.bind(this));c('EventListener').listen(this.$VideoWatchAndScrollOverlay4,'click',this.$VideoWatchAndScrollOverlay38.bind(this));var p=c('DOM').scry(this.$VideoWatchAndScrollOverlay17,"._3xxo")[0];if(p)c('EventListener').listen(p,'click',this.$VideoWatchAndScrollOverlay39.bind(this));c('EventListener').listen(this.$VideoWatchAndScrollOverlay23.getRootNode(),'mousemove',c('throttle')(this.$VideoWatchAndScrollOverlay40.bind(this),200));c('EventListener').listen(this.$VideoWatchAndScrollOverlay23.getRootNode(),'mouseenter',function(){this.$VideoWatchAndScrollOverlay11=true;}.bind(this));var q=false;if(n.popoverMenu){var r=n.popoverMenu.getInitialMenu();r.subscribe('itemclick',function(u,v){var w=v.item;if(w.getValue()==='close')this.$VideoWatchAndScrollOverlay38();}.bind(this));r.subscribe('show',function(){q=true;this.$VideoWatchAndScrollOverlay41();}.bind(this));r.subscribe('hide',function(){q=false;if(this.$VideoWatchAndScrollOverlay23.isState('playing')&&!this.$VideoWatchAndScrollOverlay11)this.$VideoWatchAndScrollOverlay34();}.bind(this));}var s=["_5190","_5199"];c('EventListener').listen(this.$VideoWatchAndScrollOverlay23.getRootNode(),'mouseleave',function(u){var v=false;if(u.toElement)s.forEach(function(w){if(c('CSS').hasClass(u.toElement,w))v=true;});if(v)return;if(this.$VideoWatchAndScrollOverlay23.isState('playing')){this.$VideoWatchAndScrollOverlay11=false;if(!q)this.$VideoWatchAndScrollOverlay34();}}.bind(this));this.$VideoWatchAndScrollOverlay42();if(!this.$VideoWatchAndScrollOverlay9){this.$VideoWatchAndScrollOverlay23.addListener('updateStatus',function(u){this.$VideoWatchAndScrollOverlay13=u.position;this.$VideoWatchAndScrollOverlay43();}.bind(this));this.$VideoWatchAndScrollOverlay23.addListener('updateBuffer',function(u){this.$VideoWatchAndScrollOverlay1=u.duration+u.offset;this.$VideoWatchAndScrollOverlay43();}.bind(this));this.$VideoWatchAndScrollOverlay19=this.$VideoWatchAndScrollOverlay44.bind(this);this.$VideoWatchAndScrollOverlay20=this.$VideoWatchAndScrollOverlay45.bind(this);}function t(u,v,w){c('setImmediate')(function(){var x=c('getActiveElement')(),y=c('DOM').contains(u,x);if(y){v();}else w();});}c('EventListener').listen(this.$VideoWatchAndScrollOverlay17,'focusin',function(){return t(this.$VideoWatchAndScrollOverlay17,function(){this.$VideoWatchAndScrollOverlay46();this.$VideoWatchAndScrollOverlay41();}.bind(this),c('emptyFunction'));}.bind(this));c('EventListener').listen(this.$VideoWatchAndScrollOverlay17,'focusout',function(){return t(this.$VideoWatchAndScrollOverlay17,c('emptyFunction'),function(){this.$VideoWatchAndScrollOverlay47();}.bind(this));}.bind(this));if(!j)c('destroyOnUnload')(function(){if(this.$VideoWatchAndScrollOverlay21){this.$VideoWatchAndScrollOverlay21.release();this.$VideoWatchAndScrollOverlay21=null;}c('ReactDOM').unmountComponentAtNode(this.$VideoWatchAndScrollOverlay18);c('ReactDOM').unmountComponentAtNode(this.$VideoWatchAndScrollOverlay14);}.bind(this));}k.prototype.$VideoWatchAndScrollOverlay42=function(){'use strict';var l=!(this.$VideoWatchAndScrollOverlay23.isState('loading')||this.$VideoWatchAndScrollOverlay23.isState('fallback'));if(!l)return;this.$VideoWatchAndScrollOverlay12=this.$VideoWatchAndScrollOverlay23.getPlaybackDuration();this.$VideoWatchAndScrollOverlay24=this.$VideoWatchAndScrollOverlay23.getVolume();};k.prototype.$VideoWatchAndScrollOverlay43=function(){'use strict';if(this.$VideoWatchAndScrollOverlay16)return;this.$VideoWatchAndScrollOverlay16=c('requestAnimationFrame')(function(){this.$VideoWatchAndScrollOverlay16=null;this.$VideoWatchAndScrollOverlay48();}.bind(this));};k.prototype.$VideoWatchAndScrollOverlay48=function(){'use strict';if(!this.$VideoWatchAndScrollOverlay12)this.$VideoWatchAndScrollOverlay42();if(this.$VideoWatchAndScrollOverlay9){c('ReactDOM').unmountComponentAtNode(this.$VideoWatchAndScrollOverlay18);c('ReactDOM').unmountComponentAtNode(this.$VideoWatchAndScrollOverlay14);return;}c('ReactDOM').render(c('React').createElement(c('EmbeddedVideoScrubber.react'),{className:"_1681",bufferedPosition:this.$VideoWatchAndScrollOverlay1,hasScrubberPreview:false,isFullscreen:false,onScrubBegin:this.$VideoWatchAndScrollOverlay19,onPointOfInterestSelect:function m(){},onScrubEnd:this.$VideoWatchAndScrollOverlay20,playbackDuration:this.$VideoWatchAndScrollOverlay12,playbackPosition:this.$VideoWatchAndScrollOverlay13,pointsOfInterest:[],previewThumbnailInformation:{},scrubberPreviewSprites:new (c('Map'))(),tabIndex:'-1'}),this.$VideoWatchAndScrollOverlay18);var l=this.$VideoWatchAndScrollOverlay13-this.$VideoWatchAndScrollOverlay12;c('ReactDOM').render(c('React').createElement(c('EmbeddedVideoPlaybackTimer.react'),{className:"_25e2 _1682",playbackPosTimestamp:this.$VideoWatchAndScrollOverlay13,remainingTimestamp:l}),this.$VideoWatchAndScrollOverlay14);};k.prototype.$VideoWatchAndScrollOverlay44=function(){'use strict';this.$VideoWatchAndScrollOverlay23.pause(c('VideoPlayerReason').SEEK);};k.prototype.$VideoWatchAndScrollOverlay45=function(l){'use strict';this.$VideoWatchAndScrollOverlay23.seek(l);this.$VideoWatchAndScrollOverlay13=l;this.$VideoWatchAndScrollOverlay23.play(c('VideoPlayerReason').SEEK);};k.prototype.$VideoWatchAndScrollOverlay26=function(){'use strict';if(!this.$VideoWatchAndScrollOverlay10||!this.$VideoWatchAndScrollOverlay22)return;this.$VideoWatchAndScrollOverlay6=c('UFIFeedbackTargets').getFeedbackTarget(this.$VideoWatchAndScrollOverlay7,function(l){c('CSS').hide(this.$VideoWatchAndScrollOverlay10);c('CSS').hide(this.$VideoWatchAndScrollOverlay22);if(l.viewercanlike)if(l.hasviewerliked){c('CSS').show(this.$VideoWatchAndScrollOverlay22);}else c('CSS').show(this.$VideoWatchAndScrollOverlay10);}.bind(this));};k.prototype.$VideoWatchAndScrollOverlay27=function(event){'use strict';this.$VideoWatchAndScrollOverlay6=c('UFIFeedbackTargets').getFeedbackTarget(this.$VideoWatchAndScrollOverlay7,function(l){c('UFIUserActions').changeReaction(this.$VideoWatchAndScrollOverlay7,l.hasviewerliked?c('UFIReactionTypes').NONE:c('UFIReactionTypes').LIKE,{source:this.$VideoWatchAndScrollOverlay5,target:event.target},event.target);}.bind(this));if(c('CSS').shown(this.$VideoWatchAndScrollOverlay10)){this.$VideoWatchAndScrollOverlay10.focus();}else this.$VideoWatchAndScrollOverlay22.focus();};k.prototype.$VideoWatchAndScrollOverlay28=function(){'use strict';if(this.$VideoWatchAndScrollOverlay23.isState('ready')||this.$VideoWatchAndScrollOverlay23.isState('playing')||this.$VideoWatchAndScrollOverlay23.isState('paused'))if(this.$VideoWatchAndScrollOverlay23.isMuted()||this.$VideoWatchAndScrollOverlay23.getVolume()===0){this.$VideoWatchAndScrollOverlay33();}else this.$VideoWatchAndScrollOverlay32();};k.prototype.$VideoWatchAndScrollOverlay29=function(){'use strict';this.$VideoWatchAndScrollOverlay49();c('CSS').addClass(this.$VideoWatchAndScrollOverlay15,"_n2w");this.$VideoWatchAndScrollOverlay40();};k.prototype.$VideoWatchAndScrollOverlay31=function(){'use strict';this.$VideoWatchAndScrollOverlay49();c('CSS').addClass(this.$VideoWatchAndScrollOverlay15,"_n2x");this.$VideoWatchAndScrollOverlay34();};k.prototype.$VideoWatchAndScrollOverlay30=function(){'use strict';this.$VideoWatchAndScrollOverlay49();c('CSS').addClass(this.$VideoWatchAndScrollOverlay15,"_n2y");this.$VideoWatchAndScrollOverlay40();};k.prototype.$VideoWatchAndScrollOverlay49=function(){'use strict';c('CSS').removeClass(this.$VideoWatchAndScrollOverlay15,"_n2w");c('CSS').removeClass(this.$VideoWatchAndScrollOverlay15,"_n2y");c('CSS').removeClass(this.$VideoWatchAndScrollOverlay15,"_n2x");};k.prototype.$VideoWatchAndScrollOverlay35=function(){'use strict';if(this.$VideoWatchAndScrollOverlay23.isState('playing')){this.$VideoWatchAndScrollOverlay23.logEvent(c('VideoPlayerLoggerEvent').WATCH_AND_SCROLL_PAUSED);this.$VideoWatchAndScrollOverlay23.pause(c('VideoPlayerReason').USER);}else this.$VideoWatchAndScrollOverlay23.play(c('VideoPlayerReason').USER);};k.prototype.$VideoWatchAndScrollOverlay33=function(){'use strict';c('CSS').removeClass(this.$VideoWatchAndScrollOverlay25,"_4pep");c('CSS').addClass(this.$VideoWatchAndScrollOverlay25,"_4peq");};k.prototype.$VideoWatchAndScrollOverlay32=function(){'use strict';c('CSS').removeClass(this.$VideoWatchAndScrollOverlay25,"_4peq");c('CSS').addClass(this.$VideoWatchAndScrollOverlay25,"_4pep");};k.prototype.$VideoWatchAndScrollOverlay39=function(event){'use strict';this.$VideoWatchAndScrollOverlay23.emit('WatchAndScroll/collapse');event.stopPropagation();};k.prototype.$VideoWatchAndScrollOverlay38=function(){'use strict';var l=this.$VideoWatchAndScrollOverlay23.getOption('CommercialBreakVideoAdOverlay','videoController'),m=l||this.$VideoWatchAndScrollOverlay23;m.logEvent(c('VideoPlayerLoggerEvent').WATCH_AND_SCROLL_EXITED);m.emit('WatchAndScroll/close');};k.prototype.$VideoWatchAndScrollOverlay36=function(){'use strict';if(this.$VideoWatchAndScrollOverlay23.isMuted()||this.$VideoWatchAndScrollOverlay23.getVolume===0){this.$VideoWatchAndScrollOverlay23.unmute();}else this.$VideoWatchAndScrollOverlay23.mute();};k.prototype.$VideoWatchAndScrollOverlay37=function(){'use strict';this.$VideoWatchAndScrollOverlay23.logEvent(c('VideoPlayerLoggerEvent').WATCH_AND_SCROLL_CHANNEL_ENTERED);c('Bootloader').loadModules(["VideoWatchAndScrollController","VideoChannelController"],function(l,m){l.onEnterChannel();m.openFromVideoPlayer(this.$VideoWatchAndScrollOverlay23,this.$VideoWatchAndScrollOverlay23.getVideoChannelID(),this.$VideoWatchAndScrollOverlay2,l.getStoryFetcherData());}.bind(this),'VideoWatchAndScrollOverlay');};k.prototype.$VideoWatchAndScrollOverlay40=function(){'use strict';if(this.$VideoWatchAndScrollOverlay11){this.$VideoWatchAndScrollOverlay41();this.$VideoWatchAndScrollOverlay47();}};k.prototype.$VideoWatchAndScrollOverlay47=function(){'use strict';this.$VideoWatchAndScrollOverlay46();this.$VideoWatchAndScrollOverlay8=setTimeout(function(){if(this.$VideoWatchAndScrollOverlay23.isState('playing'))this.$VideoWatchAndScrollOverlay34();}.bind(this),3000);};k.prototype.$VideoWatchAndScrollOverlay46=function(){'use strict';clearTimeout(this.$VideoWatchAndScrollOverlay8);};k.prototype.$VideoWatchAndScrollOverlay41=function(){'use strict';if(this.$VideoWatchAndScrollOverlay23.isState('finished')||this.$VideoWatchAndScrollOverlay23.getOption('WatchAndScroll','hideOverlay'))return;c('CSS').addClass(this.$VideoWatchAndScrollOverlay17,"_1he7");this.$VideoWatchAndScrollOverlay23.emit('WatchAndScroll/overlayShown');};k.prototype.$VideoWatchAndScrollOverlay34=function(){'use strict';c('CSS').removeClass(this.$VideoWatchAndScrollOverlay17,"_1he7");this.$VideoWatchAndScrollOverlay23.emit('WatchAndScroll/overlayHidden');};f.exports=k;}),null);